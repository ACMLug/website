<html>
<title>LUG User Fest: Using the vi editor</title>
<body bgcolor=white>
<h1>LUG User Fest: Using the vi editor</h1>
<p>
Scott Olsson - 
<a href="mailto:olsson@uiuc.edu">olsson@uiuc.edu</a>
<p>
<h2>Purpose</h2><p>
<ul><li>to cover the basics of using vi
<li>to help new users feel comfortable with basic text editing, ie: conf file management
</ul><p> 
<h2>Why learn vi?</h2>

<p><ul><li>vi is everywhere.
<li>You don't know when you'll HAVE to use vi.
<li>Impress your friends! Pick up chicks (guys).
<li>vi is fast, powerful, and uncluttered.
</ul>

<h3>Other editors</h3>
<table border=3>
<thdr>
<td><b>Editor</b>
<td><b>ASCII or X Windows</b>
<td><b>Full-screen or line editor </b>
<td><b>Lexical parsing?</b>
<tr>
<td>emacs
<td>either 
<td>full-screen
<td>yes
<tr>
<td>vi
<td>ASCII only
<td>full-screen 
<td>no (in ViM YES!)
<tr>
<td>pico
<td>ASCII only
<td>full-screen
<td>no
<tr>
<td>ed
<td>ASCII only
<td>line editor
<td>no 
<tr>
<td>ex
<td>ASCII only
<td>line editor
<td>no 
</table>
<p>
Notes:
<ul>
<li>ASCII refers to text only. 
<li>X Windows refers to a graphical mode, reminiscent of MS Windows.
<li>ASCII editors such as vi can still be used under X Windows by
opening a psuedo-terminal such as xterm or aixterm; however they 
do not directly support the graphical features of X Windows. 
<li>Lexical parsing refers to the ability of some editors to recognize
and highlight keywords in computer languages such as Fortran or C. 
</ul>
<p>Eventually, you will fall in love with some bazaar variant of 
emacs and become religiously fanatic about it. That's fine- for now however,
learning vi will help you get started and to eventually make an informed opinion
about editors down the line.
<p>
vi is a very real part of the unix tradition, and its design clearly
reflects that. vi was meant to be easy to <i>use</i>, not <i>learn</i> - that
said, once you get used to vi you'll wish you could use it for all your
text editing!<p>

<h1>Overview of vi</h1>
<h2>vi modes</h2>
<ul>
<li>Two modes: Command mode, and input mode
<li>Command mode is the default
<li>In command mode, anything typed is interpreted as commands
<li>To go to input mode, hit the letter i (or one of many other input commands)
<li>Once in input mode, everything you type is interpreted as text
<li>To return to command mode, hit the ESC key
</ul>
<h2>vi commands</h2>
<ul>
<li>Case sensitive
<li>Usually one or two characters 
<li>vi commands generally don't require hitting the ENTER or RETURN key 
<li>ex commands begin with colon (:) and require hitting the ENTER or 
RETURN key. 
ex is a line editor which underlies vi; vi is visual mode for ex. 
</ul>
<h2>Getting in and out of vi</h2>
<ul>
<li>To edit a file, enter the vi command from the UNIX command prompt: 
<xmp>
vi filename   <enter>
</xmp>
<li>Once in vi, you are automatically placed in command mode
<li>To go to input mode, hit letter i
<li>Begin typing text
<li>Return to command mode by hitting the ESC key
<li>To save the file, enter :w
<li>To quit the file, enter :q
<li>To save and quit, enter :wq
<li>To quit without saving, enter :q!
</ul>
<h1>Moving around</h1>
<h2>Moving one character at a time</h2>
<table width=100% border=3>
<tr>
<th>Function
<th>Key sequence
<tr>
<td>Move up one line
<td>Letter k, or up arrow key
<tr>
<td>Move down one line
<td>Letter j or down arrow key
<tr>
<td>Move left one character at a time
<td>letter h or left arrow key 
<tr>
<td>Move right one character at a time
<td>letter l or left arrow key 
</table>
<blockquote><p>NOTE: if you're in input mode, these movement keys are likely to show on your screen! His ESC to return to command
mode before you move around!</blockquote><p>
<h2>Scrolling</h2>
<table width=100% border=3>
<tr>
<th>Function
<th>Key sequence
<tr>
<td>Scroll up one line
<td>letter l or up arrow key 
<tr>
<td>Scroll down one line
<td>letter j or down arrow key 
<tr>
<td>Scroll forward one screen 
<td>ctrl-f 
<tr>
<td>Scroll backward one screen 
<td>ctrl-b
<tr>
<td>Scroll down half screen 
<td>ctrl-d
<tr>
<td>Scroll up half screen 
<td>ctrl-u
</table>
<h2>Global movements</h2>
<table width=100% border=3>
<tr>
<th>Function
<th>Key sequence
<tr>
<td>Go to a line, by line number
<td>nG or :n (where n is a line number)
<tr>
<td>Go to the bottom of a file
<td>G
<tr>
<td>Go to top of file
<td>1G or :1
<tr>
<td>Display line numbers
<td>:set nu
<tr>
<td>Suppress line numbers
<td>:set nonu
</table>
<h2>Moving within a line </h2>
<table width=100% border=3>
<tr>
<th>Function
<th>Key sequence
<tr>
<td>Move right one character
<td>letter l, or right arrow key
<tr>
<td>Move left one character  
<td>letter h, or left arrow key 
<tr>
<td>Move to the beginning of a line
<td>^ (carat)
<tr>
<td>Move to the end of a line
<td>$ (dollar sign)
</table>
<h2>Moving by words</h2>
<table width=100% border=3>
<tr>
<th>Function
<th>Key sequence
<tr>
<td>Move to the next word (treating punctuation as separate words)
<td>letter w (lower case)
<tr>
<td>Move to the next word (treating punctuation as part of the word)
<td>letter W (upper case)
<tr>
<td>Move to the previous word (treating punctuation as separate words)
<td>letter b (lower case)
<tr>
<td>Move to the previous word (treating punctuation as part of the word)
<td>letter B (upper case)
</table>
<h2>Moving by paragraph</h2>
<table width=100% border=3>
<tr>
<td>Move to the next paragraph
<td>} (right curly bracket)
<tr>
<td>Move to the previous paragraph
<td>{ (left curly bracket)
</table>
<h2>Locating text</h2>
<table width=100% border=3>
<tr>
<th>Function 
<th>Key sequence
<tr>
<td>Find a string
<td>Slash key (/) followed by string
<tr>
<td>Find next occurrence
<td>Letter n
<tr>
<td>Search backward for a string
<td>Question mark (?) followed by string
<tr>
<td>Search backward for previous string
<td>Question mark (?) and enter key (or letter n)
</table>
<h1>Editing commands</h1>
<table width=100% border=3>
<tr>
<td>Function 
<td>Key sequence
<tr>
<td>Insert
<td>letter i 
<tr>
<tr>
<td>Append 
<td>letter a 
<tr>
<td>Delete 
<td>letter d (upper-case D will delete to the end of a line) 
<tr>
<td>Move 
<td>delete (letter d) followed by put (letter p)
<tr>
<td>Copy 
<td>yank (letter y) followed by put (letter p)
</table>
<h2>Adding text</h2>
<table width=100% border=3>
<tr>
<td>Function
<td>Key sequence
<tr>
<td>Go into input mode
<td>letter i
<tr>
<td>Go into append mode
<td>letter a
<tr>
<td>Add a line and go into input mode
<td>letter o
<tr>
<td>Return to command mode
<td>ESC key 
</table>
<h2>Deleting text</h2>
Note: You must be in command mode to use the following commands. 
<table width=100% border=3>
<tr>
<td>Function
<td>Key sequence
<tr>
<td>Delete a line 
<td>dd
<tr>
<td>Delete n lines 
<td>ndd (where n is the number of lines to delete, e.g. 2dd)
<tr>
<td>Delete a single character
<td>letter x
<tr>
<td>Delete to the end of a line
<td>letter D (upper case)
<tr>
<td>Delete a word
<td>dw
<tr>
<td>Delete up to some string
<td>d/string/
</table>
<h2>Copying text</h2>
<table width=100% border=3>
<tr>
<th>Function
<th>Key sequence
<tr>
<td>Get text into buffer (yank)
<td>letter y
<tr>
<td>Put text from buffer onto screen (put)
<td>letter p
<tr>
<td>Get a line into buffer	
<td>yy
<tr>
<td>Get n lines into buffer	
<td>nyy (where n is a number, e.g. 3yy)
<tr>
<td>Get all text from current cursor location, up to but not including some
string
<td>y/string
<tr>
<td>Get all text from cursor to bottom of file
<dt>yG
</table>
<h2>Moving text</h2>
Moving text is done by first deleting it (d), then putting it (p). 
Please refer to the section above on deleting text.
<h2>Joining and splitting lines</h2>
<table width=100% border=3>
<tr>
<th>Function
<th>Key sequence
<tr>
<td>Join the next line to the current line 
<td>letter J (upper case)
<tr>
<td>Join the next n lines
<td>nJ (where n is the number of lines)
<tr>
<td>Split a line
<td>Hit letter i at location to split, then hit the enter key
</table>
<h2>More ways to add and replace text</h2>
Note: All the following commands (except r) leave you in input mode. 
Remember to hit the ESC key if you want to return to command mode. 
<table width=100% border=3>
<tr>
<td>Insert text at current cursor location
<td>letter i
<tr>
<td>Insert text at beginning of line
<td>letter I (upper case)
<tr>
<td>Append text after current cursor location
<td>letter a 
<tr>
<td>Append to end of current line
<td>letter A (upper case)
<tr>
<td>Open new line below cursor
<td>letter o
<tr>
<td>Open new line above cursor 
<td>letter O (upper case)
<tr>
<td>Substitute a single character at cursor
<td>letter s
<tr>
<td>Substitute entire line at cursor 
<td>letter S (upper case)
<tr>
<td>Replace a single character (but don't go into input mode)
<td>letter r 
<tr>
<td>Replace current text
<td>letter R (upper case)
</table>
<h2>Global replacements</h2>
<table width=100% border=3>
<tr>
<th>Function
<th>Key sequence
<tr>
<td>Substitute first occurrence of a string on the current line
<td>:s/old/new/
<tr>
<td>Substitute all occurrence of a string on the current line
<td>:s/old/new/g
<tr>
<td>Substitute all occurrence of a string within a range of lines
<td>:nn,mms/old/new/g  (where nn,mm is a range of line numbers separated
by comma)
<tr>
<td>Substitute all occurrence of a string within a file
<td>:1,$s/old/new/g  (where 1,$ indicates the range of line numbers from 
line 1 to the end of file)
<tr>
<td>Same as previous (replace all occurrences in a file)
<td>:%s/old/new/g  (where % is an abbreviation for 1,$)
<tr>
<td>Global replacement, confirm substitutions 
<td>:%s/old/new/gc (You will be prompted as to whether to perform each 
substitution. Enter y to confirm, or just hit enter to bypass)
</table>
<h2>Repeating and undoing edits</h2>
<table width=100% border>
<tr>
<th>Function
<th>Key sequence
<tr>
<td>Repeat
<td>period (.)
<tr>
<td>Undo last change
<td>letter u
<tr>
<td>Undo all changes on current line 
<td>letter U (upper case)
</table>
<h1>Edits across files </h1>
<h2>Reading and saving into other files</h2>
<table width=100% border=3>
<tr>
<th>Function
<th>Key sequence
<tr>
<td>Read another file into current file at cursor location
<td>:r filename
<tr>
<td>Read another file into current file, place it after some line number
<td>:nnr filename (where nn is a line number; $ is end of file)
<tr>
<td>Write text from current file to a new file  
<td>:w newfile 
<tr>
<td>Overwrite an existing file with the contents of the current file
<td>:w! some.file
<tr>
<td>Use % (current filename) to create a new file
<td>:w %.new
<tr>
<td>Append text from current file to another existent file
<td>:w >> newfile
<tr>
<td>Write a range of lines from current file to another file
<td>:nn,mmw newfile (where nn,mm is a range of lines; 
$ means end of file)
</table>
<h2>Editing multiple files</h2>
To edit another file while editing a file, use :e
<xmp>
:e filename
</xmp>
Then use :e # to switch to the alternate file:
<xmp>
:e #
</xmp>
You can also specify two filename on the vi command:
<xmp>
vi file1 file2
</xmp> 
Initially you are placed in an edit session for the first
file. To edit the second file in the sequence, use:   
<xmp>
:n 
</xmp>
To go back to the alternate (first) file, use:
<xmp>
:e #
</xmp>
<h2>Using named buffers</h2>
<ul>
<li>vi provides up to 26 named buffers (a-z)
<li>You can store text from an edit command into a named buffer to 
be retrieved later. Precede an edit command with double quote and 
a buffer name.
<li>Example: Yank a line into a named buffer, buffer b: 
<xmp>
"byy
</xmp>
<li>Once the buffer has data stored into it, it can be retrieved using 
the put (p) command. Example: 
<xmp>
"bp
</xmp>
<li>Copying is done by a sequence of yank and put; move is done by a sequence
of delete and put. 
<li>Delete a line and store it into buffer b:
<xmp>
"bdd
</xmp>
You can then move your cursor, and use "bp to move the text to the new
location.
<li>Named buffers are stored across edit sessions. You can use
the :e command to edit a second file while still inside the first. 
The use p to retrieve named buffers. 
<li>% and # refer to the current and alternate
filenames. To switch from to the other file, enter: 
<xmp>
:e #
</xmp>
</ul>
<h1>Tailoring vi</h1>
<h2>Set commands</h2>
<table width=100% border=3>
<tr>
<th>Function
<th>Key sequence
<th>Abbreviation
<th>Turn off
<tr>
<td>Ignore case during a search
<td>:set ignorecase
<td>:set ic
<td>:set noic
<tr>
<td>Display line numbers
<td>:set number
<td>:set nu
<td>:set nonumber
<tr>
<td>Report changes larger than n lines (default is 5)
<td>:set report=n
<td>none
<td>none
<tr>
<td>Show current mode (input, replace modes)
<td>:set showmode
<td>none
<td>:set noshowmode
<tr>
<td>Searches will wrap around the end of file 
<td>:set wrapscan
<td>:set ws
<td>:set nows
<tr>
<td>Change the tabstop to something (X) which isn't annoying
<td>:set tabstop=X
<td>:set ts=X
<td>:set ts=8
</table>
Note: In general, you can always turn off an option by preceding it
with no.
<h2>Creating a vi profile</h2>
<ul>
<li>vi reads .exrc from your home directory as it's profile 
<li>set commands in the .exrc file should not include the colon
</ul>
<h1>Summary of most useful commands</h1>
<table width=100% border=3>
<tr>
<th>Function
<th>Key sequence
<tr>
<td>Save current file
<td>:w  
<tr>
<td>Save and quit    
<td>:wq or, just :x
<tr>
<td>Quit without saving latest changes 
<td>:q!
<tr>
<td>Go into input mode
<td>i
<tr>
<td>Return to command mode
<td>ESC key
<tr>
<td>Add a line and go into input mode
<td>o
<tr>
<td>Go into replace mode
<td>R
<tr>
<td>Replace a single character
<td>r
<tr>
<td>Delete a single character 
<td>x
<tr>
<td>Delete a line
<td>dd
<tr>
<td>Delete n lines
<td>ndd  (e.g. 3dd, 5dd)
<tr>
<td>Delete to end of current line
<td>D
<tr>
<td>Delete to end of file
<td>dG
<tr>
<td>Go to top of file
<td>:1
<tr>
<td>Go to botton of file
<td>G 
<tr>
<td>Scroll forward one screen
<td>ctrl-f
<tr>
<td>Scroll backward one screen
<td>ctrl-b
<tr>
<td>Copy a line
<td>yy followed by p
<tr>
<td>Copy n lines 
<td>nyy followed by p
<tr>
<td>Copy up to but not including some string
<td>y/string followed by p
<tr>
<td>Global change
<td>:%s/oldstring/newstring/g
<tr>
<td>Show modes
<td>:set showmode
<tr>
<td>Show line numbers
<td>:set number (turn off with :set nonu)
</table>

<h2>Where can I get more information?</h2>
A quick search of the web can find a ton of information about using the vi editor- in particular, you should
check out <a href="http://www.vim.org">http://www.vim.org</a>, the homepage of the ViM (vi Improved) editor. ViM
includes many bug fixes and enhancements over the POSIX definition of vi, while maintaining almost
100% compatibility. Everyone should use VIM. :)
<p>
<font size=-2>Most of the contents of this page were shamelessly ripped from the web.</font>

</body></html>
